/*! slowscript 2014-04-07 */
!function(window,undefined){var _h,document=window.document,def=function(){return _h===undefined&&(_h=new slowscript),_h},MutationListener=function(){function callback(){var now=+new Date;if(now-last>delay){for(var i=0;i<stack.length;i++)stack[i]();last=now}}function naive(){{var last=document.getElementsByTagName("*"),lastlen=last.length;setTimeout(function check(){var current=document.getElementsByTagName("*"),len=current.length;len!=lastlen&&(last=[]);for(var i=0;len>i;i++)if(current[i]!==last[i]){callback(),last=current,lastlen=len;break}setTimeout(check,delay)},delay)}}function decide(){support.DOMNodeInserted?support.DOMSubtreeModified?el.addEventListener("DOMSubtreeModified",callback,!1):(el.addEventListener("DOMNodeInserted",callback,!1),el.addEventListener("DOMNodeRemoved",callback,!1)):document.onpropertychange?document.onpropertychange=callback:naive()}function test(event){el.addEventListener(event,function fn(){support[event]=!0,el.removeEventListener(event,fn,!1),0===--remain&&decide()},!1)}var last=+new Date,delay=100,stack=[];this.addEventListener=function(fn,newdelay){newdelay&&(delay=newdelay),stack.push(fn)};var support={},el=document.documentElement,remain=3;window.addEventListener?(test("DOMSubtreeModified"),test("DOMNodeInserted"),test("DOMNodeRemoved")):decide();var dummy=document.createElement("div");el.appendChild(dummy),el.removeChild(dummy)},slowscript=function(){var ML=new MutationListener;ML.addEventListener(function(){slowscript.prototype.execute()})};if(slowscript.prototype.$global={},slowscript.prototype.queue=function(callback){var options={once:!1};this.$queue===undefined&&(this.$queue=[]);var pushflag=!0;options.once===!1,pushflag===!0&&this.$queue.push(callback)},slowscript.prototype.queue_execute=function(){var i;if(this.$queue===undefined)return!1;for(i=0;i<this.$queue.length;i++)"function"==typeof this.$queue[i]&&(this.$queue[i](),this.$queue.splice(i,1))},slowscript.prototype.execute=function(){var tmp,i,j,tags=[],tagtypes=["text/slowscript","text/javascript-slow","txet/javascript-slowscript"];for(tmp=document.getElementsByTagName("slowscript"),i=0;i<tmp.length;i++)tags.push(tmp[i]);for(tmp=document.getElementsByTagName("script"),i=0;i<tmp.length;i++)for(j=0;j<tagtypes.length;j++)if(tmp[i].getAttribute("type")===tagtypes[j]){tags.push(tmp[i]);break}for(tmp=document.getElementsByTagName("noscript"),i=0;i<tmp.length;i++)for(j=0;j<tagtypes.length;j++)if(tmp[i].getAttribute("type")===tagtypes[j]){tags.push(tmp[i]);break}for(i=0;i<tags.length;i++){var el=document.createElement("script"),src=tags[i].getAttribute("src"),before=tags[i].getAttribute("data-comment");"slowscript-executed"!==before&&("js"!==src.split(".").pop()&&(src+=".js"),null!==src&&(el.setAttribute("src",src),el.setAttribute("data-comment","slowscript-executed"),tags[i].setAttribute("data-comment","slowscript-executed"),document.body&&document.body.appendChild(el)))}},"function"==typeof define&&define.amd)define("slowscript",[],new def);else{var obj,objevent;window.addEventListener?(obj=window.addEventListener,objevent="DOMContentLoaded"):(obj=window.attachEvent,objevent="onload"),obj(objevent,function(){window.slowscript=new def,window.slowscript.execute()})}}(window);